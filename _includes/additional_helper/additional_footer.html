{% if page.id %}
  <script type="text/javascript" src="{{'assets/slick/slick.js' | absolute_url}}"></script>
  <script  src="{{'assets/js/index.js' | absolute_url}}"></script>
  <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.5.9/slick.min.js'></script>

  <script>
    function initMap() {
     var latLon = {lat: parseFloat('{{ page.latitude }}'), lng: parseFloat('{{ page.longitude}}')};

     var map = new google.maps.Map(document.getElementById('map'),{
       center: latLon,
       zoom: 8
     });
     if('{{ site.data.additional_config.google-map-marker }}' == 'true'){
       var marker = new google.maps.Marker({
          position: latLon,
          map: map,
          title: '{{ page.title}}'
        });
      }
    }
  </script>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD8ww2qdsoz0oXVdcmWcCfqczAjCPuhnSo&amp;callback=initMap"
      async defer></script>

{% endif%}

<script>
function initHomePageMap() {

 var latLon = {lat: 42.6169, lng: 25.2848 };

 var map = new google.maps.Map(document.getElementById('homepagemap'),{
   center: latLon,
   zoom: 11
 });

 var centroidMarker = new google.maps.Marker({
    position: latLon,
    map: map,
    title: "Centroid"
  });
  {% capture markers %}
  [
  {% for post in site.posts %}
  {
  "trap_id" : "{{ post.trap_id }}",
  "latitude"    : "{{ post.latitude}}",
  "longitude"      : "{{ post.longitude }}",

  } {% if forloop.last %}{% else %},{% endif %}
  {% endfor %}
  ]
  {% endcapture %}
  var markers = {{markers | strip_newlines}};
  for(var i = 0; i < markers.length; i++){
    var latLng = new google.maps.LatLng(markers[i].latitude, markers[i].longitude);
    var marker = new google.maps.Marker({
      position: latLng,
      title: markers[i].trap_id
    });
    marker.setMap(map);
  }

  console.log(markers);

  var cityCircle = new google.maps.Circle({
      strokeColor: '#FF0000',
      strokeOpacity: 0.8,
      strokeWeight: 2,
      fillColor: '#FF0000',
      fillOpacity: 0.35,
      map: map,
      center: latLon,
      radius: 15 * 1000
    });

}
</script>


  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD8ww2qdsoz0oXVdcmWcCfqczAjCPuhnSo&amp;callback=initHomePageMap"
      async defer></script>
